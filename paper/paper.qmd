---
title: "Understanding Subsidy Allocation in Toronto’s Child Care Centres: Insights from a Logistic Regression Analysis"
subtitle: "Non-Profit Governance, Program Participation, and Capacity Drive Funding Decisions"
author: 
  - Claire Ma
thanks: "Code and data are available at: [https://github.com/ClaireMa0311/Toronto-licensed-child-centers](https://github.com/ClaireMa0311/Toronto-licensed-child-centers)"
date: today
date-format: long
abstract: "This study examines the factors influencing government subsidy allocation to licensed child care centres in Toronto based on Licened child Care Centers from Open Data Toronto. By employing a logistic regression model, we found that non-profit governance, participation in the Canada-Wide Early Learning and Child Care (CWELCC) program, and larger capacity significantly increase a centre's likelihood of receiving subsidies. These findings highlight how funding priorities align with public goals to expand access to high-quality child care, especially for vulnerable populations. By uncovering patterns in subsidy distribution, this research provides critical insights for policymakers to ensure more equitable and effective resource allocation."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false
library(opendatatoronto)
library(tidyverse)
library(readr)
library(dplyr)
library(tidyr)
library(stats)
library(ggplot2)
library(glmnet)
library(caret)
library(stats)
library(car)
library(broom)
library(pROC)
library(kableExtra)
library(knitr)
library(modelsummary)
library(here)
library(gt)
library(arrow)
library(ggcorrplot)
```

# Introduction

Child care subsidies play a critical role in making high-quality early childhood education and care accessible to families and communities. In Toronto, licensed child care centres serve as essential providers, offering regulated and professional environments that support child development. Subsidies for licensed child care centres help close the affordability gap by offsetting the high costs of quality care, making it accessible to more families [@cleveland2009nonprofit]. These subsidies not only ease the financial burden on families but also ensure that children have access to nurturing environments that foster cognitive, social, and emotional growth during their formative years [@vines2020accessing]. Understanding the factors that determine which licensed centres receive subsidies is crucial for policymakers and stakeholders to promote equitable resource allocation and maximize the benefits of early childhood programs.

Licensed child care centres in urban areas like Toronto provide high-quality, regulated care, ensuring safety, staffing, and curriculum standards. Research shows that subsidized centres, with trained educators and comprehensive programming, support better child development outcomes. Subsidies are crucial for covering operational costs, retaining qualified staff, and maintaining regulatory compliance, enhancing the quality of care.

Despite their importance, disparities in the allocation of subsidies remain a significant concern. Research indicates that centres in certain neighborhoods or serving specific populations may receive fewer subsidies, even when demand is high [@Johnson_Ryan_Brooks_2012]. Additionally, characteristics such as enrollment capacity, accreditation status, and program focus (e.g., infant care versus pre-kindergarten) often influence a centre’s eligibility and prioritization for funding. These discrepancies highlight the need for a data-driven approach to understanding and improving the distribution of subsidies among licensed child care centres, ensuring that resources are allocated equitably to maximize their impact.

This study analyzes the Toronto Open Data: Licensed Child Care Centres dataset to examine factors influencing subsidy allocation, including ward, operating auspice, CWELCC participation, building type, and total space [@citeopendatatoronto; @toronto2024licensed]. The findings aim to inform equitable and efficient subsidy policies, support accessible, high-quality child care in Toronto, and help centres enhance their subsidy eligibility.

Using a logistic regression model, the analysis identifies three key predictors of subsidy allocation: non-profit governance, participation in the Canada-Wide Early Learning and Child Care (CWELCC) program, and licensed capacity. The findings reveal that centres operated by non-profit organizations are significantly more likely to receive subsidies, reflecting a policy preference for supporting entities that prioritize social objectives over profit motives. Participation in the CWELCC program emerges as the strongest predictor, highlighting the importance of alignment with affordability initiatives in determining funding priorities. Additionally, larger centres with greater licensed capacity are moderately more likely to receive subsidies, indicating that operational scale plays a role in funding decisions, though it is less significant than governance and policy alignment. These findings underscore the need for policies that address disparities in subsidy distribution while ensuring that funding supports accessible, high-quality child care for families across Toronto.

The paper is structured as follows: @sec-data introduces the dataset, its source, key variables, and preprocessing steps, highlighting its relevance to understanding subsidy allocation in Toronto's child care system. @sec-model outlines the logistic regression model, including its rationale, formulation, key predictors, and validation methods. @sec-results presents the analysis results, focusing on significant predictors and model fit. @sec-discussion interprets the findings, discusses implications, and outlines limitations and future research directions. An appendix with supplementary materials and data evaluation is included for transparency and reproducibility.

# Data {#sec-data}

## Data Overview

The dataset used in this study was sourced from a publicly available site by the City of Toronto [@citeopendatatoronto; @toronto2024licensed]. This original raw dataset provides detailed information about licensed child care centres, including 20 variables capturing aspects of their location, operating auspice (e.g., non-profit, public, or commercial), space usage, building type, participation in government programs such as the Canada-Wide Early Learning and Child Care (CWELCC) system, and other operational details. These data offer valuable insights into the factors influencing subsidy allocation, a key policy tool for improving access to early childhood education and care. By translating real-world phenomena into structured data entries, this dataset enables a comprehensive exploration of equity and efficiency in child care funding. Detailed data collection analysis is in the Appendix. @tbl-overview visualized first 10 rows of cleaned data to be used in this study.

```{r, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
data <- read_parquet(here("data", "02-analysis_data", "analysis_data.parquet"))
```

```{r}
#| label: tbl-overview
#| tbl-cap: "Overview of the cleaned dataset for licensed child care centers, summarizing key variables such as governance model (Operating Auspice), building type, CWELCC participation, total licensed space, and subsidy status, providing a snapshot of the dataset's structure and focus"
#| echo: false
#| warning: false
#| message: false

# Create a GT table with the first 10 rows
data %>%
  rename(
    Ward = ward,
    `Operating Auspice` = AUSPICE,
    `Building Type` = bldg_type,
    `CWELCC Participation` = cwelcc_flag,
    `Total Space` = TOTSPACE,
    Subsidy = subsidy
  ) %>%
  head(10) %>%
  gt::gt()
```

@fig-subsidy visualizes the distribution of subsidies among licensed child care centres in Toronto. The x-axis represents the subsidy status (0 = No, 1 = Yes), while the y-axis shows the count of centres in each category. This distribution highlights the government's prioritization of subsidies to a majority of licensed centres, reflecting efforts to enhance accessibility and affordability. However, the remaining non-subsidized centres indicate potential gaps or disparities in resource allocation, which could be further explored to ensure equitable funding.


```{r}
#| label: fig-subsidy
#| fig-cap: "Distribution of subsidy allocation among licensed child care centres, indicating that 67.3% of centres receive subsidies while 32.7% do not."
#| echo: false
#| message: false
#| warning: false

# Calculate percentages
data_summary <- data %>%
  group_by(subsidy) %>%
  summarise(count = n()) %>%
  mutate(percentage = round(100 * count / sum(count), 1)) # Calculate percentage

# Create the bar plot with percentage labels
plot1 <- ggplot(data_summary, aes(x = factor(subsidy, labels = c("No", "Yes")), y = count)) +
  geom_bar(stat = "identity", fill = c("skyblue", "coral"), alpha = 0.8) +
  geom_text(aes(label = paste0(percentage, "%")), vjust = -0.5, size = 3) + # Add percentage labels
  labs(
    x = "Subsidy",
    y = "Count"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 9), # Reduce title size
    axis.title = element_text(size = 10), # Reduce axis title size
    axis.text = element_text(size = 8) # Reduce axis text size
  )

plot1
```

## Method

The dataset used for this study is the **`Licensed Child Care Centres dataset`**, sourced from the [@citeopendatatoronto; @toronto2024licensed]. It provides detailed information about licensed child care centres in Toronto, capturing aspects such as their governance, capacity, infrastructure, and subsidy status. The original dataset consisted of 1071 records for all licensed child care centres within the city. For this analysis, the data underwent preprocessing to focus on variables relevant to the study, such as subsidy status, building type, CWELCC participation, total space, and operating auspice. These variables were retained to examine how different factors influence subsidy allocation. The dependent variable **`subsidy`**, originally recorded as "Yes"/"No," was encoded as 1 for subsidized and 0 for non-subsidized centres. Similarly, the **CWELCC participation** variable was converted into a binary format (1 =Y, 0 =N). Categorical variables such as **building type** and **`operational AUSPICE`** were consolidated to simplify analysis and address sparse categories. Additionally, missing and irrelevant records were removed to ensure the dataset was both accurate and meaningful for the research objectives.
 
The data for this study was systematically downloaded, cleaned, analyzed, and visualized using **`R`** [@citeR], a statistical programming language. Several `R` packages were utilized in this study and they are described in {@sec-R-package}.

## Measurement

This analysis focuses on the following variables, with a specific emphasis on subsidy as the dependent variable:

- `Subsidy`: The binary dependent variable indicating whether a licensed child care centre receives a government subsidy.
- 1: The centre is subsidized.
- 0: The centre is not subsidized.
- `ward`: `A numeric variable representing the ward number for child care centres.
- `Operating Auspice`: The operating auspice of the child care centre, describing its governance and operational model. Possible values include:
- Non-Profit: Centres operated by non-profit organizations, often reinvesting surplus revenues into quality improvements.
- Commercial: For-profit centres operated by private organizations.
- Public: Centres run by public agencies or school boards.
- `Building Type`: The type of building where the child care centre operates, reflecting its infrastructure. 

Examples include:

- Commercial Building
- Community College/University
- Community Health Centre
- Community Rec/Centre - Board Run
- Community/Rec Centre - City
- Community/Recreation Centre
- High Rise Apartment
- Hospital/Health Centre
- House
- Industrial Building
- Low Rise Apartment
- Office Building 
- Place of Worship
- Private Elementary School
- Public (school closed)
- Public Elementary Special
- Public High School
- Public Middle School
- Purpose Built
- Synagogue
- Other
- `CWELCC Participation`: A binary variable indicating participation in the Canada-Wide Early Learning and Child Care (CWELCC) program:
- 1: The centre participates in CWELCC, enabling reduced child care fees.
- 0: The centre does not participate in CWELCC.
- `Total Space`: A numerical variable representing the total licensed capacity (spaces available) for all age groups at a child care centre.

Detailed information about these variables’ information and data structure is presented in @tbl-overview.

The variables were carefully selected based on literature-supported relevance to subsidy allocation and their representation of real-world phenomena

@fig-relationbldgtype illustrates the distribution of subsidy status (1 = Subsidized, 0 = Not Subsidized) across various building types housing licensed child care centres. Notably, Public Schools, Purpose-Built Facilities, and Community Recreation Centres exhibit higher proportions of subsidized centres. These facilities are often designed to meet regulatory requirements for child care, including adequate space, safety standards, and accessibility, aligning closely with subsidy allocation policies [@cleveland2009nonprofit]. Conversely, building types such as Industrial Buildings, Private Elementary Schools, and Office Buildings show lower proportions of subsidized centres, likely due to infrastructure challenges or misalignment with subsidy eligibility criteria, such as limited accessibility or higher operational costs [@yan2011impact]. These patterns suggest that building type significantly influences subsidy distribution. Given the numerous categories of building types, a de tailed analysis is warranted to fully understand these trends.

```{r}
#| label: fig-relationbldgtype
#| fig-cap: "Proportional distribution of subsidy across building types, highlighting variations in subsidy allocation among different facility categories based on their infrastructure and alignment with eligibility criteria."
#| echo: false
#| message: false
#| warning: false
# Update the plot to use descriptive labels for the subsidy legend
ggplot(data, aes(x = bldg_type, fill = as.factor(subsidy))) +
  geom_bar(position = "fill", alpha = 0.8) +
  scale_fill_manual(
    values = c("blue", "red"),
    labels = c("No", "Yes") # Replace 0/1 with No/Yes
  ) +
  labs(
    x = "Building Type",
    y = "Proportion",
    fill = "Subsidy"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 90, hjust = 1), # Rotate x-axis labels for readability
    plot.title = element_text(size = 12),
    axis.title = element_text(size = 10),
    axis.text = element_text(size = 9)
  )
```

@fig-relationAuspice illustrates the proportional distribution of subsidy status (1 = Subsidized, 0 = Not Subsidized) across the different operating auspices of licensed child care centres: Commercial Agency, Non-Profit Agency, and Other. Non-Profit Agencies and "Other" entities are predominantly subsidized, while Commercial Agencies display a more balanced distribution. This aligns with research indicating that non-profits rely heavily on subsidies to deliver public goods and services, as they often operate in markets with limited profitability [@hansmann1979role]. Conversely, commercial entities are less reliant on subsidies due to their revenue-driven models.The dominance of subsidies in the "Other" category suggests this group may include hybrid or public-private organizations aligned with specific government initiatives [@anheier2014nonprofit]. Such reliance reflects the strategic use of subsidies to support services underserved by the private market [@weisbrod2000profit].

```{r}
#| label: fig-relationAuspice
#| fig-cap: "Proportional distribution of subsidy by operating auspice, illustrating the prevalence of subsidies across different governance models such as commercial, non-profit, and other agencies,  highlighting the high proporation of subsidized centres of non-profit agencies, reflecting the alignment of subsidies with non-profit objectives of affordability and accessibility."
#| echo: false
#| message: false
#| warning: false

ggplot(data, aes(x = AUSPICE, fill = as.factor(subsidy))) +
  geom_bar(position = "fill", alpha = 0.8) +
  scale_fill_manual(
    values = c("blue", "red"),
    labels = c("No", "Yes") # Change legend labels to No/Yes
  ) +
  labs(
    x = "Auspice",
    y = "Proportion",
    fill = "Subsidy"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1), # Rotate x-axis labels for readability
    plot.title = element_text(size = 12),
    axis.title = element_text(size = 10),
    axis.text = element_text(size = 9)
  )
```

@fig-key a heatmap illustrates the correlations between three variables: total space, CWELCC participation and subsidy. The positive correlation between total space and subsidy (0.25) suggests that larger facilities are modestly more likely to receive subsidies, reflecting their capacity to serve larger populations or provide greater public benefits. This aligns with research indicating that larger organizations often have the resources and visibility to secure subsidies [@hansmann1980role; @salamon2002tools]. Additionally, the stronger correlation between CWELCC participation and subsidy (0.48) highlights that subsidy allocation may target entities meeting specific programmatic or policy criteria, consistent with the literature emphasizing strategic targeting of subsidies to maximize societal impact [@weisbrod1998profit]. The weaker correlation between total space and CWELCC oarticipation (0.16) suggests that program eligibility is less dependent on size and more on qualitative factors like service type or demographic focus, which is supported by an established analysis of non-profit funding models [@anheier2005nonprofit]. Together, these correlations emphasize the nuanced role of subsidies in balancing operational scale and policy alignment, underscoring the importance of strategic allocation in public funding [@salamon1995partners].


```{r}
#| label: fig-key
#| fig-cap: "Correlation heatmap illustrating the relationships between total space, subsidy, and CWELCC participation, showing a moderate positive correlation between subsidy and CWELCC participation (0.48) and weaker correlations with total space (0.25), reflecting the nuanced factors influencing subsidy allocation."
#| echo: false
#| message: false
#| warning: false

# Define new labels for the graph without renaming the original columns
new_labels <- c("Total Space", "Subsidy", "CWELCC Participation")

cor_matrix <- cor(data %>% select(TOTSPACE, subsidy, cwelcc_flag), use = "complete.obs")

# Plot the heatmap without axis labels
ggcorrplot(cor_matrix, lab = TRUE) +
  scale_x_discrete(labels = c("Total Space", "Subsidy", "CWELCC Participation")) + # Update x-axis labels
  scale_y_discrete(labels = c("Total Space", "Subsidy", "CWELCC Participation")) + # Update y-axis labels
  theme_minimal() +
  theme(
    axis.title.x = element_blank(), # Remove x-axis title
    axis.title.y = element_blank() # Remove y-axis title
  )
```

# Model {#sec-model}

## Model Specification

To investigate the factors influencing subsidy allocation to licensed child care centres, a reduced logistic regression model was specified. The dependent variable,`Subsidy`, is a binary indicator representing whether a child care centre receives government subsidy (1 = subsidized, 0 = not subsidized). The model includes three key predictors:

`Operating Auspice`: A categorical variable indicating the governance model of the child care centre (e.g., Non-Profit Agency, Other). Non-profit agencies are hypothesized to be positively associated with subsidy allocation, consistent with previous research emphasizing their prioritization in funding schemes [@cleveland2005benefits].

`CWELCC participation`: A binary variable capturing whether the centre participates in the Canada-Wide Early Learning and Child Care program (1 = participates, 0 = does not participate). Centres participating in this initiative are expected to have higher odds of receiving subsidies due to their alignment with government objectives of affordability and accessibility [@friendly2022affordable].

`Total Space`: A continuous variable representing the number of licensed spaces available in the centre. Larger centres are hypothesized to have higher odds of subsidy allocation, as they can accommodate more families and align with policy goals of maximizing access [@hansmann1980role; @salamon2002tools].

The logistic regression model can be expressed mathematically as follows:

$$
\begin{aligned}
\text{logit}(P(Y=1)) = \beta_0 + \beta_1 (\text{Non-Profit Auspice}) + \beta_2 (\text{Other Auspice}) + \\ \beta_3 (\text{CWELCC Participation}) + \beta_4 (\text{Total Space})
\end{aligned}
$$

Where:

\begin{itemize}
    \item \( P(Y=1) \): The probability that a child care center receives a subsidy (\( Y=1 \)).
    \item \( \text{logit}(P(Y=1)) \): The log-odds of receiving a subsidy, defined as:
    \[
    \text{logit}(P(Y=1)) = \ln\left(\frac{P(Y=1)}{1 - P(Y=1)}\right)
    \]
\end{itemize}

### Parameters:

1. **$\beta_0$ (Intercept):**

   - Represents the baseline log-odds of subsidy allocation when all predictors are set to their reference categories or zero values.
   
   - It provides the starting point for predicting subsidy probabilities.

2. **$\beta_1$ (Non-Profit Auspice):**

   - Measures the effect of a center being operated as a non-profit compared to the baseline (e.g., commercial auspice) on the log-odds of subsidy allocation.
   
   - A positive $\beta_1$ increases the likelihood of receiving a subsidy for non-profit centers relative to commercial centers.
   
3. **$\beta_2$ (Other Auspice):**

   - Measures the effect of a center being operated as "other type" compared to the baseline (e.g., commercial auspice) on the log-odds of subsidy allocation.
   
   - A positive $\beta_2$ increases the likelihood of receiving a subsidy for other-type centers relative to commercial centers.

4. **$\beta_3$ (CWELCC Participation):**

   - Captures the influence of participating in the Canada-Wide Early Learning and Child Care (CWELCC) program on the log-odds of subsidy allocation.

5. **$\beta_4$ (Total Space):**

   - Represents the effect of the number of licensed child care spaces (a continuous variable) on the log-odds of subsidy allocation.


## Model Justification 

The logistic regression model was chosen for this analysis because it is well-suited to the binary nature of the dependent variable, subsidy status (1 = Subsidized, 0 = Not Subsidized). A logistic regression model using the binomial family is specifically designed to model dichotomous outcomes by estimating the log-odds of the event occurring as a linear function of predictor variables [@hosmer2013applied]. The binomial family is appropriate here because it assumes that the dependent variable follows a Bernoulli distribution, where each observation represents a binary outcome (subsidized or not subsidized). This ensures that the predicted probabilities remain between 0 and 1, aligning with the real-world constraints of the problem. Additionally, logistic regression provides interpretable coefficients, which indicate the direction and magnitude of the relationship between each predictor and the log-odds of subsidy allocation. This makes it particularly useful for guiding policy decisions, as coefficients can be directly converted into odds ratios for actionable insights [@peng2002introduction].

The modeling process follows a detailed and methodical approach to ensure the development of a robust logistic regression model for predicting subsidy allocation in licensed child care centers. Initially, the categorical variables operating auspice and building type were encoded as factors to ensure proper interpretation of their qualitative nature by the model. The dataset was then split into training (70%) and testing (30%) sets, allowing for model validation on unseen data to assess generalizability. A full logistic regression model was first fit to include all predictors (subsidy ~ .), providing a baseline for further analysis. To refine the model, stepwise selection based on the Akaike Information Criterion (AIC) was employed, balancing goodness of fit with model parsimony by penalizing unnecessary complexity. This process resulted in the selection of the most significant predictors for subsidy allocation.

To further simplify and enhance interpretability, the ward variable was excluded because it lacked statistical significance and added redundancy, as its effects were captured by other predictors like CWELCC participation and total space. Additionally, ward had no strong theoretical justification as a direct determinant of subsidy allocation. The building type variable was removed due to high dimensionality, sparse representation in many categories, and statistical insignificance. Its effects are likely mediated by other variables, such as total space and auspice. Excluding it improved parsimony and interpretability.

The final model retained operating auspice, CWELCC participation, and total space, as these predictors are strongly supported by theory and data. This approach balances simplicity and accuracy, ensuring the model remains relevant for informing equitable subsidy allocation policies.

Multiple models, including the full model, the AIC-based model, and the simplified model, were compared using goodness-of-fit metrics such as AIC and Deviance to ensure the best-performing model was selected. Additionally, McFadden’s R-squared was calculated to evaluate the explanatory power of the model, comparing the log-likelihood of the fitted model to a null model. A higher McFadden’s R-squared value confirmed the model’s ability to explain a significant portion of the variance in subsidy allocation.

By training and testing the models on separate subsets of the data, the process ensured validation and minimized the risk of overfitting. The final model was chosen for its simplicity, interpretability, and ability to retain statistically significant predictors that align with theoretical expectations. This rigorous process not only ensures robust prediction but also aligns with real-world phenomena in subsidy allocation, making the model both practical and reliable.

## Model Assumptions

Detailed model assumption check is in @sec-model-details. 

## Alternative Models

Alternative models like decision trees and random forests were considered but were found less interpretable for policy-focused analyses. Logistic regression was chosen for its balance of simplicity, interpretability, and effectiveness.

# Results {#sec-results}

The logistic regression model’s performance metrics are presented in @tbl-coefresult. 

```{r,echo=FALSE, message=FALSE, warning=FALSE}
#| label: tbl-coefresult
#| echo: false
#| warning: false
#| message: false
#| tbl-cap: "Final logistic regression model results for subsidy allocation, showing significant predictors including operating auspice (Non-Profit Agency), CWELCC participation, and total space, with model fit metrics (AIC = 760.8, BIC = 785.7, RMSE = 0.32) indicating robust performance."

# Load model
model <- readRDS(file = here("models", "final_model.rds"))

# Regression table with standard errors and p-values
model_list <- list(
  "Final Model" = model
)

modelsummary(
  model_list,
  statistic = c("std.error", "p.value")
)
```

The regression model reveals several key observations regarding the predictors and overall goodness of fit. The intercept, estimated at -4.818, represents the baseline log-odds of the outcome when all predictors are at their reference or zero level.  While not directly interpretable, it serves as a baseline reference for the model. Among the predictors, the operating auspice: non-profit Agency category significantly increases the log-odds of the outcome, with an estimate of 2.937 and a small standard error of 0.192, indicating a strong and reliable positive effect. However, the operating auspice: other category shows an unusually large coefficient (18.680) paired with a very high standard error (631.207), suggesting instability. The CWELCC participation variable also exhibits a strong and reliable positive effect, with an estimate of 3.101 and a standard error of 0.346, indicating that being flagged as CWELCC significantly increases the log-odds of the outcome.  Additionally, the total space variable has a small but statistically significant effect, with an estimate of 0.013 and a low standard error of 0.003, reflecting robustness. In terms of model fit, the dataset includes 750 observations, and the model's AIC (760.8) and BIC (785.7) suggest a reasonable balance between goodness of fit and complexity, as lower values are generally preferred [@burnhammodel].  The log-likelihood of -375.414 also supports an adequate fit, with a higher (less negative) value indicating better alignment between the model and the data.  Finally, the RMSE of 0.32 reflects the model's predictive accuracy, with a low value indicating that the model's predictions closely match the observed data.  Overall, the model performs well but may require refinement, particularly in addressing instability in the AUSPICE: Other variable.

@fig-cp further visualizes the significance of predictors.

```{r}
#| label: fig-cp
#| fig-cap: "Coefficient plot for the logistic regression model, highlighting the significance of predictors with 95% confidence intervals, where most predictors demonstrate strong positive associations with subsidy allocation, exceprt for 'Other' operating auspice lacks statistical significance."
#| echo: false
#| message: false
#| warning: false

# Extract coefficients and confidence intervals
tidy_model <- broom::tidy(model, conf.int = TRUE)

# Highlight significant coefficients
tidy_model <- tidy_model %>%
  mutate(significant = ifelse(conf.low > 0 | conf.high < 0, "Significant", "Not Significant"))

# Plot with enhancements
ggplot(tidy_model, aes(x = estimate, y = reorder(term, abs(estimate)), color = significant)) +
  geom_point() +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2) +
  scale_color_manual(values = c("Significant" = "red", "Not Significant" = "black")) +
  labs(
    x = "Coefficient Estimate",
    y = "Predictor Variables",
    color = "Significance"
  ) +
  theme_minimal()
```

The evaluation of the logistic regression model shows strong performance based on McFadden’s $R^2$ and the Area Under the Receiver Operating Characteristic Curve (AUC). McFadden’s $R^2$ which is a pseudo-$R^2$ metric specifically designed for logistic regression, was calculated as 0.454. This value suggests that the model explains 45.4% of the variance in the outcome variable, indicating a well-fitting model. Values between 0.2 and 0.4 are considered indicative of a good model fit, and values above 0.4 demonstrate an excellent fit. Thus, the model's $R^2$ value strongly supports its utility in predicting the outcome.

```{r}
#| label: fig-roc
#| fig-cap: "Receiver Operating Characteristic (ROC) curve demonstrating the model's classification performance, with an Area Under the Curve (AUC) of 0.906, indicating excellent discriminatory ability between subsidized and non-subsidized child care centers."
#| echo: false
#| message: false
#| warning: false

# ROC Curve and AUC
roc_curve <- roc(
  data$subsidy,
  predict(model,
    newdata = data %>%
      rename(
        Ward = ward,
        `Operating_Auspice` = AUSPICE,
        `Building_Type` = bldg_type,
        `CWELCC_Participation` = cwelcc_flag,
        `Total_Space` = TOTSPACE
      ), type = "response"
  )
)
plot(roc_curve, main = "ROC Curve", print.auc = T)
```

The ROC curve in @fig-roc shown further validates the model's classification ability, with an AUC of 0.906. An AUC value close to 1 indicates excellent discriminative power, where the model effectively separates true positives from false positives. The AUC of 0.8998 places this model on the borderline of very good and excellent discrimination, underscoring its robust predictive capacity.

```{r}
#| label: fig-pvo
#| fig-cap: " Plot of observed outcomes versus predicted probabilities, illustrating the alignment between model predictions and actual subsidy allocation, with a strong diagonal trend indicating good predictive performance."
#| echo: false
#| message: false
#| warning: false
# Generate predicted probabilities for the test dataset
data$predicted_prob <- predict(model, newdata = data %>%
  rename(
    Ward = ward,
    `Operating_Auspice` = AUSPICE,
    `Building_Type` = bldg_type,
    `CWELCC_Participation` = cwelcc_flag,
    `Total_Space` = TOTSPACE
  ), type = "response")

# Predicted vs. Observed Scatterplot
ggplot(data, aes(x = predicted_prob, y = subsidy)) +
  geom_jitter(width = 0.02, height = 0.02, alpha = 0.6, color = "blue") +
  geom_smooth(method = "loess", color = "red", se = FALSE) +
  labs(
    x = "Predicted Probability",
    y = "Observed Outcome"
  ) +
  theme_minimal()
```

@fig-pvo provides a visual representation of the alignment between the predicted probabilities generated by the logistic regression model and the actual observed binary outcomes. This diagnostic tool is crucial for assessing the model's calibration and predictive accuracy, as emphasized by Harrell [@harrell2012regression]. The x-axis shows the predicted probabilities ranging from 0 to 1, while the y-axis represents the observed outcomes, where 0 indicates the absence of an event and 1 indicates its presence. The red diagonal line serves as the reference for perfect calibration, where predicted probabilities perfectly match observed outcomes.

The clustering of blue points near 0 and 1 along the y-axis indicates that the model effectively distinguishes between the two classes, a key goal in binary classification modeling. This observation aligns with the high AUC value of 0.8998 observed in the ROC curve, which demonstrates the model’s excellent discriminative ability. Additionally, points near the diagonal line further suggest strong calibration, where the predicted probabilities closely align with actual outcomes. The concentration of blue points at the extremes of 0 and 1 highlights that the model makes confident and accurate predictions in many cases

However, some dispersion is observed at lower predicted probabilities, particularly around 0.25 and 0.5. These deviations may reflect cases where the model struggles to classify outcomes or makes less confident predictions. Such discrepancies could indicate areas where further refinement of the model or predictors is necessary. These deviations could also be linked to specific subgroups or predictor interactions, necessitating additional diagnostics or recalibration [@steyerberg2010assessing].

Overall, this graph demonstrates that the model is well-calibrated and effective in its predictions, with minor limitations at lower probability levels. The close alignment of predictions with observed outcomes supports the model's reliability in classification tasks. This interpretation aligns with other metrics, such as McFadden’s $R^2$ and AUC, which indicate robust overall model performance while pointing to opportunities for refinement. Including this visualization in the results section provides a clear and data-driven assessment of the model's strengths and areas for potential improvement.

# Discussion {#sec-discussion}

Subsidy allocation to licensed child care centres in Toronto addresses the critical issue of affordability, making high-quality early childhood education accessible to more families as licensed centers must meet strict safety, staffing, and programming standards, which foster children’s cognitive, social, and emotional growth [@cleveland2009nonprofit]. Without subsidies, the cost of regulated care can be prohibitive, particularly for low-income households. This paper undertakes a detailed examination of the factors influencing subsidy allocation to licensed child care centres in Toronto, leveraging the City of Toronto's Licensed Child Care Centres dataset from Open Data porta, which includes detailed information about 1,071 licensed centers [@citeopendatatoronto]. This study employs a logistic regression model-binomial family to identify relationships between key predictor variables and the binary dependent variable – receiving subsidies.


The dataset underwent thorough preprocessing to ensure accuracy and reliability, including data cleaning, variable transformation, and a training-test split. Key predictors—operating auspice, CWELCC participation, and total space—were selected based on their relevance, supported by literature. Stepwise selection using AIC removed non-significant variables (ward and building type). Logistic regression assumptions were validated: independence of observations was ensured, linearity of continuous predictors (e.g., total space) was confirmed through residual plots, and multicollinearity was minimized with VIF values below 5. These steps affirm the model's statistical rigor and suitability for the analysis.

The logistic regression model provides insights into key predictors influencing subsidy allocation to licensed child care centres in Toronto, quantifying the impact of governance models, program participation, and operational capacity. The coefficient for non-profit auspice is strongly positive and statistically significant, indicating that non-profit centres are far more likely to receive subsidies compared to commercial or public centres. This aligns with policy priorities favoring organizations with a social mission, which often serve economically vulnerable populations, as noted by Hansmann [@hansmann1980role] and Salamon et al. [@salamon1995partners]. Non-profits’ alignment with public goals of equity and accessibility underscores their prioritization for funding. Participation in the Canada-Wide Early Learning and Child Care (CWELCC) program emerged as the most significant predictor, highlighting the importance of policy alignment. Centres in CWELCC, which comply with national affordability initiatives, are significantly more likely to receive subsidies, as emphasized by Bennett et al. [@bennett2011working] and Kaga et al. [@kaga2010caring]. This aligns with targeted strategies aimed at expanding affordable, high-quality child care access. Total space, representing a centre’s licensed capacity, also positively influences subsidy allocation, although its effect is smaller. Larger centres, capable of serving more families, are attractive candidates for funding due to economies of scale and visibility, as noted by Weisbrod [@weisbrod1998profit]. However, its smaller coefficient indicates that capacity alone does not determine funding, consistent with Penn’s findings that governance and programmatic alignment play a greater role [@penn2011quality]. Odds ratios further underscore the strength of these predictors, with non-profits and CWELCC participants several times more likely to receive subsidies. The statistical significance of these variables, evidenced by small standard errors, reinforces their reliability, while less consistent variables like certain building types exhibited instability, suggesting a secondary role in funding decisions. These findings highlight a strategic approach to subsidy allocation, balancing operational capacity with policy goals and governance structures [@penn2011quality].

The logistic regression model applied in this research proves to be an ideal tool for analyzing subsidy allocation to licensed child care centres in Toronto, particularly due to its capacity to handle binary outcomes effectively. By modeling the log-odds of an event, logistic regression ensures predicted probabilities remain between 0 and 1, aligning seamlessly with the binary nature of the dependent variable—whether a centre receives a subsidy. This feature makes the model both statistically appropriate and easy to interpret. A notable strength of the model lies in its interpretability. Coefficients can be transformed into odds ratios, providing a clear understanding of how predictors influence the likelihood of receiving subsidies. For example, the positive coefficients for non-profit auspice and CWELCC Participation underscore their significant, policy-relevant impact on subsidy distribution. This clarity makes the model particularly valuable for stakeholders and policymakers who require actionable and easily communicated insights. The model's performance metrics further demonstrate its effectiveness. A McFadden's $R^2$ value of 0.454 indicates that the model explains a substantial portion of the variance in subsidy allocation. Additionally, the Area Under the Curve (AUC) of 0.906 highlights the model’s exceptional discriminative ability, confirming its capacity to accurately differentiate between subsidized and non-subsidized centres. The low Root Mean Squared Error (RMSE) further attests to the model’s strong predictive performance. Together, these metrics validate the model's reliability and robustness. Another key advantage of logistic regression is its simplicity compared to more complex approaches such as random forests or decision trees. While those alternatives might offer marginally higher predictive power, they lack the transparency and interpretability required for policy-focused research. Logistic regression strikes a critical balance between accuracy and clarity, making it a practical choice for guiding equitable subsidy allocation strategies. Moreover, the flexibility of logistic regression allows for extensions to explore more intricate relationships. For instance, incorporating interaction terms or temporal data could provide deeper insights while maintaining the model's usability. This adaptability ensures the model remains relevant and applicable as policy environments evolve.

Our model, while effective, has several limitations that warrant consideration. One of the primary limitations is its reliance on the assumption of linearity between predictors and the log-odds of the outcome. Although this assumption is often reasonable, it may oversimplify complex, non-linear relationships that can exist in real-world phenomena such as subsidy allocation. Failing to capture these non-linear relationships can lead to biased estimates and limit the model’s predictive power [@harrell2015regression]. Another limitation is the model’s dependence on correct specification of predictors. Excluding relevant variables or including irrelevant ones in initial variable selection can result in omitted variable bias or overfitting, respectively. Additionally, the model does not inherently account for higher-order interactions unless explicitly included.  For instance, the combined effect of Non-Profit Auspice and CWELCC Participation could provide valuable insights into how policy and governance jointly influence subsidy allocation. Logistic regression can oversimplify complex relationships if interaction terms are not considered, potentially leading to incomplete conclusions [@hosmer2013applied].  Finally, the static nature of the model is another drawback.  Logistic regression provides a snapshot of relationships at a single point in time, failing to capture temporal dynamics or policy changes that can influence subsidy allocation over time. Incorporating longitudinal data could provide a more nuanced understanding of how these relationships evolve [@singer2003applied].

Future studies could address the limitations of this research by adopting more advanced modeling techniques and incorporating additional data to better capture the complexities of subsidy allocation. Introducing non-linear models or machine learning approaches, such as random forests or gradient boosting, could uncover hidden patterns and interactions between predictors that logistic regression may overlook. Additionally, exploring interaction terms, such as the joint effects of governance models and program participation, could provide more nuanced insights into policy impacts. Longitudinal data would be particularly valuable for understanding how subsidy allocation evolves over time, especially in response to policy changes or shifts in economic conditions. Incorporating time-series or panel data analysis could reveal temporal dynamics and provide a richer understanding of causal relationships. Geographic disparities, noted but not deeply explored in this study, could also be addressed using spatial regression or multilevel models to account for regional clustering and unobserved local factors influencing subsidy distribution. Finally, integrating additional predictors, such as demographic variables, socio-economic indicators, or quality ratings of child care centres, could enhance the explanatory power of future models. These enhancements would provide a more comprehensive view of subsidy allocation and inform strategies to ensure equitable and effective distribution of resources.

\newpage

\appendix

# Appendix {-}

# Model Assumption {#sec-model-details}

To ensure the validity of the logistic regression model, several key assumptions were assessed, including independence of observations, the appropriateness of a binary outcome, the linearity of predictors with the logit and absence of multicollinearity. The analysis integrates results from visual diagnostics, multicollinearity tests, and statistical measures.

### 1. Independence of Observations

The logistic regression model assumes that the observations are independent of each other. In this analysis, each data point corresponds to an individual child care center, ensuring independence. There is no clustering or repeated measures within the dataset, which validates this assumption.

### 2. Binary Outcome

The logistic regression model assumes a binary dependent variable. In this case, the outcome variable, `subsidy`, is binary, indicating whether a child care center receives a subsidy (1 = Subsidized, 0 = Not Subsidized). This aligns with the model's requirement, ensuring the suitability of the binomial family for fitting the data.

### 3. Linearity of Predictors with the Logit

The @fig-cr The component + residual plots evaluate the linearity of the continuous variables and the relationship between categorical predictors and the logit transformation.

```{r}
#| label: fig-cr
#| fig-cap: "CR Plot for Linearity Chekck: No Violate of Linearity Assumptions"
#| echo: false
#| message: false
#| warning: false
# Customizing Component + Residual Plots with concise y-axis label
crPlots(model, ylab = "Component+Residuals") # Shortened y-axis label
```

- `TOTSPACE`: The relationship between the total space (TOTSPACE) and the logit appears approximately linear, as indicated by the flat, consistent pattern of residuals around the horizontal axis. This supports the assumption of linearity.

- `CWELCC Flag`: The plot for CWELCC participation shows a horizontal trend, suggesting no significant deviation from linearity. The data support the inclusion of this variable as a binary predictor.

- `AUSPICE`: The residual patterns for categorical levels of AUSPICE (e.g., "Commercial Agency" and "Other") indicate distinct clusters with consistent variability. This suggests the categorical nature of this variable does not violate linearity assumptions.
Overall, the visual inspection suggests that the linearity assumption for the predictors with the logit is met.

### 4. Multicollinearity Assessment

Variance Inflation Factor (VIF):

To assess multicollinearity among the predictors, the VIF values for the reduced model variables were calculated.All VIF values are below 2, well within the acceptable threshold of 5, indicating minimal multicollinearity among the predictors. The independence of the predictors ensures the stability of the coefficient estimates.

```{r,echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Calculate VIF
vif_values <- vif(model)
vif_values
```

# Observational Data Methodology for Licensed Child Care Centres in Toronto 

## Population, Frame, and Sample

### Population

The population includes all licensed child care centres in Toronto as recorded in the publicly available dataset provided by Open Toronto. This population aligns with studies on regulated child care that  emphasize the role of licensing in ensuring quality and safety in early childhood education [@morrissey2010childcare]. Licensing sets a minimum standard for safety, staff qualifications, and child-to-provider ratios, thereby offering a benchmark for regulated care. However, this dataset inherently excludes unlicensed child care providers, which limits the representativeness of the broader child care system. Unlicensed providers often cater to lower-income families or those in rural and underserved urban areas [@cleveland2003benefits]. These providers may offer affordable or flexible care arrangements but are not bound by the same quality standards, making them a critical but underrepresented part of the child care ecosystem.

- Represented Groups: The dataset focuses on licensed centres that adhere to provincial regulatory requirements, ensuring they meet established standards for infrastructure, safety, and staff qualifications. These facilities are more likely to participate in government subsidy programs and policy initiatives, aligning with Cleveland and Krashinsky's findings that licensed child care is generally associated with higher quality standards [@cleveland2003benefits].

- Excluded Groups: The dataset excludes informal and unlicensed providers, which disproportionately serve families with lower socioeconomic status or those living in areas with limited access to licensed centres. This exclusion highlights a systemic gap, as research shows that unlicensed care often fills critical needs for flexibility and affordability, especially for families in marginalized communities [@fuller1996family].

### Frame

The dataset represents a comprehensive census of licensed child care centres, reflecting administrative records compiled by the city. 

- Strengths: The census-like nature of the dataset significantly reduces selection bias, as it captures all licensed child care centres within Toronto’s boundaries. The inclusion of geographic coordinates allows for advanced spatial analysis, making it possible to study access and equity in child care distribution. This level of coverage enhances the dataset's utility for policy analysis and urban planning.

- Limitations: While comprehensive, the dataset is static and does not capture temporal changes, such as new centres opening, existing ones closing, or changes in capacity. As highlighted in the literature, administrative datasets often fail to account for dynamic operational changes, limiting their applicability for longitudinal analysis [@tekin2007childcare]. Furthermore, the exclusion of qualitative attributes, such as user satisfaction or service quality, reduces the dataset's ability to capture nuanced aspects of child care provision.

### Sample

The dataset employs census sampling, meaning all licensed child care centres are included. This approach ensures that the sample is representative of the licensed child care sector in Toronto, eliminating sampling error associated with random or stratified sampling methods.

- Strengths: By using a census approach, the dataset minimizes sampling error and provides a reliable foundation for spatial and capacity-related analyses. Census data allows for a holistic view of the licensed child care system, capturing the full scope of regulated providers within the city.

- Limitations: The reliance on census data excludes informal care arrangements, which are often a vital resource for families who face financial or logistical barriers to accessing licensed centers. Tekin emphasizes that informal care plays a critical role in many families' child care decisions, and its absence may lead to an underestimation of the actual child care resources available in Toronto [@tekin2007childcare].

## Data Collection Methodology

### Observational Data Compilation

The dataset originates from administrative records maintained by the licensing authorities of the City of Toronto. These records are generated as part of routine compliance monitoring, ensuring a high degree of accuracy and reliability. Administrative data is widely regarded as a robust source for policy and program evaluation [@cleveland2003benefits]. Such data typically includes detailed information about center capacity, governance models, and geographic location, making it suitable for quantitative analysis.

- Strengths: Administrative data offers several advantages, including its high accuracy, as it is subject to rigorous regulatory oversight. Unlike survey data, it is less prone to recall bias and provides a standardized framework for comparing centres across various dimensions, such as capacity, location, and subsidy participation.

- Limitations: However, the dataset lacks qualitative insights, such as parental satisfaction or staff perceptions, which are crucial for understanding the broader impact of child care services. This limitation underscores the need for supplementary data sources, such as surveys or focus groups, to provide a more comprehensive view.

### Non-response Handling

While the dataset does not involve survey non-response, its exclusion of unlicensed providers creates a systematic gap. Research shows that informal care often fills critical voids in underserved areas, and its exclusion may understate the full scope of child care provision [@fuller1996family].

## Sampling Approach and Trade-offs

### Strengths

- Comprehensive Coverage: Census sampling ensures that no licensed centers are omitted, providing a complete overview of the licensed child care landscape.

- Geospatial Precision: The inclusion of geographic coordinates facilitates spatial analyses, such as proximity studies and accessibility evaluations, aligning with methodologies used in urban planning research [@larsen2015accessibility].

- High Validity: Licensing records are validated through routine inspections and compliance monitoring, ensuring the reliability of the dataset [@cleveland2003benefits].

### Limitations

- Exclusion of Informal Care: Informal care arrangements, often preferred for their affordability and flexibility, are absent from the dataset. This exclusion limits the dataset's applicability for studying the full scope of child care options available to families [@morrissey2010childcare].

- Static Nature: The dataset represents a snapshot in time, limiting its utility for analyzing trends or changes in the child care sector over time.

- Regulatory Bias: Centers excluded due to non-compliance with licensing standards may disproportionately represent marginalized communities, skewing the dataset’s representativeness.

## Observational Bias and Measurement Challenges

### Observational Bias

Selection bias is inherent in observational datasets, as the inclusion criteria (i.e., licensing) inherently exclude certain providers. Additionally, survivorship bias may arise from the exclusion of centres that have closed, potentially skewing the analysis toward larger, more established providers.

### Measurement Challenges

- Geographic Aggregation: Aggregating data to broader geographic units, such as wards or neighborhoods, can obscure micro-level disparities in access or service quality.

- Capacity Limitations: Reported capacities may not accurately reflect actual utilization or unmet demand. Blau notes that capacity data often fails to account for operational constraints, such as staffing shortages or seasonal fluctuations [@blau2006preschool].

## Methodological Enhancements and Recommendations

### Enhancements

- Incorporating Temporal Data: Adding longitudinal data would enable the analysis of trends, such as changes in capacity or subsidy participation [@fuller1996family].

- Integration with Demographics: Linking the dataset with census data would allow for equity-focused analyses, such as the relationship between socioeconomic status and access to licensed care [@larsen2015accessibility].

### Recommendations

- Addressing Informal Care: Future studies should integrate data from community surveys or focus groups to capture informal care arrangements [@morrissey2010childcare].

- Dynamic Updates: Regular updates to administrative records would enhance the dataset’s relevance and applicability, addressing limitations related to its static nature.

- Geospatial Enhancements: Including data on public transit access or neighborhood-level socioeconomic indicators could provide a richer context for spatial analyses, aligning with Tekin’s findings on urban accessibility and equity [@tekin2007childcare].

# R packages {#sec-R-package} 

The following are packages used for this study:

- `opendatatoronto`[@citeopendatatoronto]: Used to access and retrieve the Licensed Child Care Centres dataset directly from the City of Toronto's open data portal.

- `arrow` [@citearrow]: Provided efficient tools for reading and writing Parquet files, enabling fast and memory-efficient handling of large datasets during analysis.

- `here` [@citehere]: Simplified file referencing by creating relative paths, ensuring reproducibility and consistency in accessing datasets, scripts, and outputs across different working environments.

- `readr` [@citereadr]: Simplified the import and parsing of raw data into R.

- `tidyverse` [@citetidyverse]: Streamlined data manipulation, cleaning, and visualization processes.

- `dplyr` [@citedplyr]: Provided tools for filtering, transforming, and summarizing the dataset effectively.

- `tidyr` [@citetidyr]: Enabled data tidying processes such as reshaping, separating, or combining, and handling missing values to structure the dataset into a clean and analyzable format.

- `ggplot2` [@citeggplot2]: Created powerful and flexible visualizations tailored to the analysis needs.

- `ggcorrplot` [@citeggcorrplot]: Simplified the visualization of correlation matrices with customizable heatmaps, including options for labeling and styling to enhance interpretability and presentation.

- `glmnet` [@citeglmnet]: Applied for fitting regularized regression models and feature selection.

- `modelsummary` [@citemodelsummary]: Streamlined the creation of comprehensive and customizable summary tables for regression models, including key statistics such as AIC, BIC, and coefficient estimates, to facilitate clear model comparisons and reporting.

- `stats` [@citestats]: Provided core statistical functions to fit models, perform hypothesis testing, and calculate measures such as p-values, log-likelihoods, and AIC for model evaluation.

- `car` [@citecar]: Used for diagnostic tools, including Variance Inflation Factor (VIF) tests, to assess multicollinearity.

- `caret` [@citecaret]: Enabled the development, validation, and evaluation of machine learning models, including training-test splits and performance metrics.

- `pROC` [@citepROC]: Facilitated the computation and visualization of Receiver Operating Characteristic (ROC) curves and Area Under the Curve (AUC) metrics, enabling robust evaluation of the model's classification performance.

- `stargazer` [@citestagazer]: Generated formatted regression tables for outputs.

- `broom` [@citebroom]: Simplified the process of converting model outputs into tidy data frames, enabling seamless integration of statistical results with visualization and reporting workflows.

- `kableExtra` [@citekableExtra]:Enhanced the presentation of tables by adding advanced formatting options, including captions, headers, and styling, for polished and professional reporting.

- `gt` [@citegt]: Enabled the creation of aesthetically pleasing and highly customizable tables for presenting data and model summaries in a clean and professional format.

- `knitr` [@citeknitr]: Dynamically integrated code, results, and plots into the final document for seamless reporting.


\newpage

# References
